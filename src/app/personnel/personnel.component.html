<!-- personnel.component.html -->

<div *ngIf="personnels$ | async as personnels; else loading" class="container main-container">
  <h2 class="mt-4 mb-3">Personnel List</h2>

  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Nom</th>
        <th>Prenom</th>
        <th>Profil</th>
        <th>Telephone</th>
        <th>Adresse</th>
        <th>Salaire</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let personnel of personnels">
        <td>{{ personnel.nom }}</td>
        <td>{{ personnel.prenom }}</td>
        <td>{{ personnel.profil }}</td>
        <td>{{ personnel.telephone }}</td>
        <td>{{ personnel.adresse }}</td>
        <td>{{ personnel.salaire }}</td>
        <td>
          <button (click)="editPersonnel(personnel)" class="btn btn-primary btn-sm mx-1">Edit</button>
          <button (click)="deletePersonnel(personnel.id)" class="btn btn-danger btn-sm mx-1">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>
  <hr class="my-4">

  <h2 class="mt-4 mb-3">{{ editingPersonnel ? 'Edit Personnel' : 'Add Personnel' }}</h2>

  <form *ngIf="editingPersonnel; else addForm" #editForm="ngForm" (ngSubmit)="updatePersonnel()" class="mb-4">
    <!-- Edit form fields -->
    <label for="updatedNom">Nom:</label>
    <input id="updatedNom" type="text" [(ngModel)]="updatedPersonnel.nom" name="nom" required class="form-control">

    <label for="updatedPrenom">Prenom:</label>
    <input id="updatedPrenom" type="text" [(ngModel)]="updatedPersonnel.prenom" name="prenom" required class="form-control">

    <label for="updatedProfil">Profil:</label>
    <input id="updatedProfil" type="text" [(ngModel)]="updatedPersonnel.profil" name="profil" required class="form-control">

    <label for="updatedTelephone">Telephone:</label>
    <input id="updatedTelephone" type="text" [(ngModel)]="updatedPersonnel.telephone" name="telephone" required class="form-control">

    <label for="updatedAdresse">Adresse:</label>
    <input id="updatedAdresse" type="text" [(ngModel)]="updatedPersonnel.adresse" name="adresse" required class="form-control">

    <label for="updatedSalaire">Salaire:</label>
    <input id="updatedSalaire" type="text" [(ngModel)]="updatedPersonnel.salaire" name="salaire" required class="form-control">

    <button type="submit" class="btn btn-success mt-2">Update Personnel</button>
    <button type="button" (click)="cancelEdit()" class="btn btn-secondary mt-2">Cancel</button>
  </form>

  <ng-template #addForm>
    <form (ngSubmit)="addPersonnel()" class="mb-4">
      <!-- Add form fields -->
      <label for="newNom">Nom:</label>
      <input id="newNom" type="text" [(ngModel)]="newPersonnel.nom" name="nom" required class="form-control">

      <label for="newPrenom">Prenom:</label>
      <input id="newPrenom" type="text" [(ngModel)]="newPersonnel.prenom" name="prenom" required class="form-control">

      <label for="newProfil">Profil:</label>
      <input id="newProfil" type="text" [(ngModel)]="newPersonnel.profil" name="profil" required class="form-control">

      <label for="newTelephone">Telephone:</label>
      <input id="newTelephone" type="text" [(ngModel)]="newPersonnel.telephone" name="telephone" required class="form-control">

      <label for="newAdresse">Adresse:</label>
      <input id="newAdresse" type="text" [(ngModel)]="newPersonnel.adresse" name="adresse" required class="form-control">

      <label for="newSalaire">Salaire:</label>
      <input id="newSalaire" type="text" [(ngModel)]="newPersonnel.salaire" name="salaire" required class="form-control">

      <button type="submit" class="btn btn-primary mt-2">Add Personnel</button>
    </form>
  </ng-template>
</div>

<ng-template #loading>Loading...</ng-template>
